# "org" ensures this Service is used with the correct Serverless Framework Access Key.
org: rumplergd
# "service" is the name of this project. This will also be added to your AWS resource names.
service: services-file

provider:
  name: aws
  logRetentionInDays: 7
  runtime: nodejs20.x
  stage: ${opt:stage, 'development'}
  region: us-east-1
  timeout: 15
  apiGateway:
    shouldStartNameWithService: true
  memorySize: 128
  environment:
    NODE_ENV: ${self:provider.stage} #Significa que NODE_ENV ser√° igual al stage configurado en el provider.
    S3_ACCESS_KEY: ${ssm:S3_ACCESS_KEY}
    S3_SECRET_ACCESS_KEY: ${ssm:S3_SECRET_ACCESS_KEY}
    S3_REGION: ${ssm:S3_REGION}
    S3_BUCKET_NAME: ${ssm:S3_BUCKET_NAME}

functions:
  main:
    handler: dist/serverless.handler
    events:
      - httpApi:
          method: ANY
          path: /{proxy+}

plugins:
  - serverless-offline
